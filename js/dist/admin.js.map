{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@retechvn/mediated-transaction/webpack/bootstrap","webpack://@retechvn/mediated-transaction/webpack/runtime/compat get default export","webpack://@retechvn/mediated-transaction/webpack/runtime/define property getters","webpack://@retechvn/mediated-transaction/webpack/runtime/hasOwnProperty shorthand","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/app']\"","webpack://@retechvn/mediated-transaction/./src/common/index.js","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['admin/app']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/extend']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['admin/components/AdminNav']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@retechvn/mediated-transaction/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['admin/components/AdminPage']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@retechvn/mediated-transaction/./src/admin/components/TransactionListPage.js","webpack://@retechvn/mediated-transaction/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@retechvn/mediated-transaction/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('retechvn/mediated-transaction', () => {\n  console.log('[retechvn/mediated-transaction] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/AdminNav'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/AdminPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","import app from 'flarum/admin/app';\nimport AdminPage from 'flarum/admin/components/AdminPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Dropdown from 'flarum/common/components/Dropdown';\nexport default class TransactionListPage extends AdminPage {\n  throttledSearch = debounce(250, () => this.loadPage(0));\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.transactionData = [];\n    this.isLoadingPage = true;\n    this.moreResults = false;\n    this.query = '';\n    this.loadPage(0);\n  }\n  parseResults(results) {\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n\n    [].push.apply(this.transactionData, results.payload.data);\n    this.isLoadingPage = false;\n    m.redraw();\n\n    return results;\n  }\n\n  loadPage(offset = 0) {\n    this.transactionData = [];\n    return app.store\n      .find('admin/transactions', {\n        page: {\n          offset,\n        },\n      })\n      .catch(() => {})\n      .then(this.parseResults.bind(this));\n  }\n\n  headerInfo() {\n    return {\n      className: 'SharedUploadPage--header',\n      icon: 'fas fa-magic',\n      title: 'Quản lý giao dịch',\n      description: 'What is here??',\n    };\n  }\n\n  getStatusText(status) {\n    switch (status) {\n      case 3:\n        return 'Hoàn thành';\n      case 4:\n        return 'Đã hủy';\n      case 5:\n        return 'Đang khiếu nại';\n      case 6:\n        return 'Đang khiếu nại';\n      default:\n        return 'Đang xử lý';\n    }\n  }\n\n  getStatusColor(status) {\n    switch (status) {\n      case 3: // Hoàn thành\n        return 'green';\n      case 4: // Đã hủy\n        return 'red';\n      case 1: // Đang xử lý\n      case 2:\n      case 5:\n        return 'orange';\n      case 6:\n        return 'orange';\n      default:\n        return 'gray';\n    }\n  }\n\n  formatCurrency(value) {\n    if (!value) value = 0;\n    return (+value).toLocaleString('vi-VN', {\n      style: 'currency',\n      currency: 'VND',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    });\n  }\n\n  content() {\n    return [\n      m('div.UserListPage-header', [\n        m('div.Search-input', [\n          m('input.FormControl.SearchBar', {\n            type: 'search',\n            placeholder: 'Nhập thông tin tìm kiếm',\n            oninput: (e) => {\n              this.isLoadingPage = true;\n              this.query = e.target.value;\n              this.throttledSearch();\n            },\n          }),\n        ]),\n      ]),\n\n      m('div', [\n        m('.sideNavContainer', [\n          m('div', [\n            m('div.iconcontainer', [m('div.rvn__title-table', 'Danh sách yêu cầu giao dịch')]),\n\n            m('table.rvn__table', [\n              m('thead.rvn__thead', [\n                m('tr.rvn__tr', [\n                  m('th.rvn__th', 'STT'),\n                  m('th.rvn__th', 'Người tạo'),\n                  m('th.rvn__th', 'Người nhận'),\n                  m('th.rvn__th', 'Tiền thuê'),\n                  m('th.rvn__th', 'Phí (%)'),\n                  m('th.rvn__th', 'Tổng tiền'),\n                  m('th.rvn__th', 'Ngày tạo'),\n                  m('th.rvn__th', 'Trạng thái'),\n                  m('th.rvn__th', { style: 'width:100px;' }, 'Chi tiết'),\n                ]),\n              ]),\n\n              m(\n                'tbody.rvn__tbody',\n                this.transactionData.map((transac, colIndex) =>\n                  m('tr.rvn__tr', { key: transac.id }, [\n                    m('td.rvn__td', colIndex + 1),\n                    m('td.rvn__td', transac.attributes.creator.username),\n                    m('td.rvn__td', transac.attributes.receiver.username),\n                    m('td.rvn__td', this.formatCurrency(transac.attributes.rvn_amount)),\n                    m('td.rvn__td', transac.attributes.rvn_fee * 100 + '%'),\n                    m('td.rvn__td', this.formatCurrency(transac.attributes.rvn_amount + transac.attributes.rvn_amount * transac.attributes.rvn_fee)),\n                    m('td.rvn__td', transac.attributes.created_at),\n                    m('td.rvn__td',  {\n                      className: this.getStatusColor(transac.attributes.rvn_status),\n                    },this.getStatusText(transac.attributes.rvn_status)),\n                    m(\n                      'td.rvn__td',\n                      m(\n                        Dropdown,\n                        {\n                          className: 'User-controls',\n                          buttonClassName: 'Button Button--icon Button--flat',\n                          menuClassName: 'Dropdown-menu--right',\n                          icon: 'fas fa-ellipsis-h',\n                        },\n                        m(\n                          'button.Button.UserList-editModalBtn',\n                          {\n                            title: 'nút',\n                            // onclick: () => app.modal.show(EditUserModal, { user }),\n                          },\n                          [\n                            m('i.fas.fa-pencil-alt'), // icon\n                            'Xem chi tiết',\n                          ]\n                        )\n                      )\n                    ),\n                  ])\n                )\n              ),\n            ]),\n          ]),\n        ]),\n      ]),\n    ];\n  }\n}\n\nfunction debounce(delay, callback) {\n  let timeoutId;\n\n  return function (...args) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      callback.apply(this, args);\n    }, delay);\n  };\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport AdminNav from 'flarum/admin/components/AdminNav';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport TransactionListPage from './components/TransactionListPage';\n\napp.initializers.add('retechvn/mediated-transaction', () => {\n  app.routes.transactionListPage = {\n    path: '/giao-dich-trung-gian',\n    component: TransactionListPage,\n  };\n  extend(AdminNav.prototype, 'items', function (items) {\n    items.add(\n      'list-scammers',\n      <LinkButton href={app.route('transactionListPage')} icon=\"fas fa-magic\" title=\"Giao dịch trung gian\">\n        Giao dịch trung gian\n      </LinkButton>,\n      49\n    );\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","app","add","console","log","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","TransactionListPage","_AdminPage","_this","callback","timeoutId","_len","arguments","length","args","Array","_key","apply","concat","throttledSearch","loadPage","_this3","_len2","_key2","clearTimeout","setTimeout","create","constructor","_proto","oninit","vnode","this","transactionData","isLoadingPage","moreResults","query","parseResults","results","payload","links","next","push","data","m","redraw","offset","find","page","then","headerInfo","className","icon","title","description","getStatusText","status","getStatusColor","formatCurrency","value","toLocaleString","style","currency","minimumFractionDigits","maximumFractionDigits","content","_this2","type","placeholder","oninput","target","map","transac","colIndex","id","attributes","creator","username","receiver","rvn_amount","rvn_fee","created_at","rvn_status","Dropdown","buttonClassName","menuClassName","AdminPage","transactionListPage","path","component","extend","AdminNav","items","LinkButton","href"],"sourceRoot":""}