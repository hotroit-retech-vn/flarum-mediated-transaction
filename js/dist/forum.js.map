{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@retechvn/mediated-transaction/./src/common/index.js","webpack://@retechvn/mediated-transaction/./src/forum/components/TransactionHistoryList.js","webpack://@retechvn/mediated-transaction/./src/forum/components/TransactionHistoryPage.js","webpack://@retechvn/mediated-transaction/./src/forum/components/TransactionPage.js","webpack://@retechvn/mediated-transaction/./src/forum/index.js","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['Component']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['app']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/app']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/components/Page']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['common/extend']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['components/Button']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['components/IndexPage']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['components/UserPage']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['forum/app']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@retechvn/mediated-transaction/external root \"flarum.core.compat['helpers/listItems']\"","webpack://@retechvn/mediated-transaction/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@retechvn/mediated-transaction/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@retechvn/mediated-transaction/webpack/bootstrap","webpack://@retechvn/mediated-transaction/webpack/runtime/compat get default export","webpack://@retechvn/mediated-transaction/webpack/runtime/define property getters","webpack://@retechvn/mediated-transaction/webpack/runtime/hasOwnProperty shorthand","webpack://@retechvn/mediated-transaction/webpack/runtime/make namespace object","webpack://@retechvn/mediated-transaction/./forum.js"],"sourcesContent":["import app from 'flarum/common/app';\n\napp.initializers.add('retechvn/mediated-transaction', () => {\n  console.log('[retechvn/mediated-transaction] Hello, forum and admin!');\n});\n","import Component from \"flarum/Component\";\nimport app from \"flarum/app\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport Button from \"flarum/components/Button\";\n\n// import TransferHistoryListItem from \"./TransferHistoryListItem\";\n\nexport default class TransactionHistoryList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    // this.moreResults = false;\n    // this.transferHistory = [];\n    // this.user = this.attrs.params.user;\n    // this.loadResults();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component({ size: \"large\" });\n    }\n\n    return (\n      <div>\n        <div style=\"padding-bottom:10px; font-size: 24px;font-weight: bold;\">\n          Lịch sử giao dịch\n        </div>\n\n        <ul style=\"margin: 0;padding: 0;list-style-type: none;position: relative;\">\n          {this.transferHistory.map((transferHistory) => {\n            return (\n              <li style=\"padding-top:5px\" key={transferHistory.id()} data-id={transferHistory.id()}>\n                {TransferHistoryListItem.component({ transferHistory })}\n              </li>\n            );\n          })}\n        </ul>\n          \n        {!this.loading && this.transferHistory.length===0 && (\n          <div>\n            <div style=\"font-size:1.4em;color: var(--muted-more-color);text-align: center;height: 300px;line-height: 100px;\">{app.translator.trans(\"ziven-transfer-money.forum.transfer-list-empty\")}</div>\n          </div>\n        )}\n\n        {this.hasMoreResults() && (\n          <div style=\"text-align:center;padding:20px\">\n            <Button className={'Button Button--primary'} disabled={this.loading} loading={this.loading} onclick={() => this.loadMore()}>\n              {app.translator.trans('ziven-transfer-money.forum.transfer-list-load-more')}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  loadMore() {\n    this.loading = true;\n    this.loadResults(this.transferHistory.length);\n  }\n\n  parseResults(results) {\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n    [].push.apply(this.transferHistory, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  hasMoreResults() {\n    return this.moreResults;\n  }\n\n  loadResults(offset = 0) {\n    return app.store\n      .find(\"transferHistory\", {\n        filter: {\n          user: this.user.id(),\n        },\n        page: {\n          offset,\n        },\n      })\n      .catch(() => {})\n      .then(this.parseResults.bind(this));\n  }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport TransferHistoryList from \"./TransactionHistoryList\";\n\nexport default class TransactionHistoryPage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loadUser(m.route.param(\"username\"));\n  }\n\n  content() {\n    return (\n      <div className=\"TransferHistoryPage\">\n        {TransferHistoryList.component({\n          params: {\n            user: this.user,\n          },\n        })}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/components/IndexPage';\nimport listItems from 'flarum/helpers/listItems';\nimport Button from 'flarum/components/Button';\nimport Alert from 'flarum/common/components/Alert';\n\nexport default class TransactionPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.usernameCreate = app.session.user.username();\n    this.initializeData();\n    this.resultsUser = [];\n    this.showDropdown = false;\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  initializeData() {\n    this.data = {\n      rvn_creator_id : 1,\n      rvn_receiver_id: '',\n      rvn_rent_amount: 0,\n      rvn_fee: 0.1,\n      rvn_fee_payer: this.usernameCreate,\n      rvn_note: '',\n    };\n    this.rvn_title = this.usernameCreate;\n    this.rvn_receiver_name = '';\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    app.setTitle('Giao dịch trung gian');\n    app.setTitleCount(0);\n    document.addEventListener('click', this.handleClickOutside);\n  }\n\n  onremove() {\n    document.removeEventListener('click', this.handleClickOutside);\n  }\n\n  view() {\n    return m('.IndexPage', [IndexPage.prototype.hero(), m('.container', [m('.sideNavContainer', [this.renderSidebar(), this.renderForm()])])]);\n  }\n\n  renderSidebar() {\n    return m('nav.IndexPage-nav.sideNav', m('ul', listItems(IndexPage.prototype.sidebarItems().toArray())));\n  }\n\n  renderForm() {\n    return m('.IndexPage-results.sideNavOffset', [\n      m('div.retechvn__text-center', m('h2', 'Giao dịch trung gian')),\n      m('.Modal-body.rvn__body-form .row', [\n        this.renderInput('Tên giao dịch', this.rvn_title, true),\n        this.renderReceiverInput(),\n        this.renderNumberInput('Tiền thuê', this.data.rvn_rent_amount, this.handleRentChange.bind(this)),\n        this.renderRadioGroup(),\n        this.renderInput(`Phí dịch vụ (${this.data.rvn_fee * 100}%)`, this.rvn_service_fee, true),\n        this.renderInput('Tổng số tiền phải trả', this.rvn_total_amount, true),\n        this.renderTextarea('Ghi chú', this.data.rvn_note, (e) => (this.data.rvn_note = e.target.value)),\n        this.renderCheckbox(),\n        this.renderSubmitButton(),\n      ]),\n    ]);\n  }\n\n  renderInput(label, value, disabled = false) {\n    return m('.Form-group.col.col-md-6', [m('label', label), m('input.FormControl', { value, disabled })]);\n  }\n\n  renderReceiverInput() {\n    return m('.Form-group.position-relative.col.col-md-6', [\n      m('label', [\n        'Người nhận ',\n        m(\n          'span',\n          { className: this.data.rvn_receiver_id ? 'rvn__text-green' : 'rvn__text-red' },\n          this.data.rvn_receiver_id ? '(Đã chọn)' : '(Chưa chọn)'\n        ),\n      ]),\n      m('input.FormControl', {\n        value: this.rvn_receiver_name,\n        onfocus: () => (this.showDropdown = true),\n        onkeyup: (e) => this.handleSearch(e),\n      }),\n      this.showDropdown && this.renderDropdown(),\n    ]);\n  }\n\n  renderDropdown() {\n    return m(\n      '.search-results',\n      this.resultsUser.length ? this.resultsUser.map(this.renderDropdownItem.bind(this)) : m('div.no-results.rvn__mx2', 'Không có dữ liệu')\n    );\n  }\n\n  renderDropdownItem(user) {\n    return m('div.search-result-item', { onclick: () => this.selectReceiver(user) }, [\n      user.avatarUrl()\n        ? m('img.Avatar', { src: user.avatarUrl(), alt: user.displayName() })\n        : m('span.Avatar', { style: this.avatarStyle(user) }, user.displayName().charAt(0).toUpperCase()),\n      m('span.username', user.displayName()),\n    ]);\n  }\n\n  renderNumberInput(label, value, onChange) {\n    return m('.Form-group.col.col-md-6', [\n      m('label', `${label} (${this.formatCurrency(value)})`),\n      m('input[type=number].FormControl', { value, onchange: onChange }),\n    ]);\n  }\n\n  renderRadioGroup() {\n    return m('.Form-group.col.col-md-6', [\n      m('label', 'Người trả phí'),\n      m('.radio-group', [\n        this.renderRadioOption('Người gửi', this.usernameCreate, this.data.rvn_fee_payer === this.usernameCreate),\n        this.renderRadioOption(\n          'Người nhận',\n          this.data.rvn_receiver_id,\n          this.data.rvn_fee_payer === this.data.rvn_receiver_id,\n          !this.data.rvn_receiver_id\n        ),\n      ]),\n    ]);\n  }\n\n  renderRadioOption(label, value, checked, disabled = false) {\n    return m('label', [\n      m('input[type=radio]', {\n        name: 'fee_payer',\n        value,\n        checked,\n        disabled,\n        onchange: (e) => this.handleFeePayerChange(e),\n      }),\n      ` ${label} (${value})`,\n    ]);\n  }\n\n  renderTextarea(label, value, onChange) {\n    return m('.Form-group.col.col-12', [m('label', label), m('textarea.FormControl', { value, onchange: onChange })]);\n  }\n\n  renderCheckbox() {\n    return m('.Form-group.col', [\n      m('label', [\n        m('input[type=checkbox]', {\n          checked: this.isChecked,\n          onchange: (e) => (this.isChecked = e.target.checked),\n        }),\n        ' Đồng ý với điều khoản và điều kiện!',\n      ]),\n    ]);\n  }\n\n  renderSubmitButton() {\n    return m('.Form-group.col.col-12', [\n      Button.component(\n        {\n          type: 'button',\n          className: 'Button Button--primary Button--block',\n          onclick: (e) => this.validateForm() && this.onsubmit(e),\n        },\n        'Tạo giao dịch'\n      ),\n    ]);\n  }\n\n  handleRentChange(e) {\n    this.data.rvn_rent_amount = +e.target.value;\n    this.calculateTotal();\n  }\n\n  handleFeePayerChange(e) {\n    this.data.rvn_fee_payer = e.target.value;\n    this.calculateTotal();\n  }\n\n  handleSearch(e) {\n    this.rvn_receiver_name = e.target.value;\n    setTimeout(() => this.search(e.target.value), 1000);\n  }\n\n  selectReceiver(user) {\n    this.rvn_receiver_name = user.displayName();\n    this.data.rvn_receiver_id = user.username();\n    this.rvn_title = `${this.usernameCreate}__${this.data.rvn_receiver_id}`;\n    this.showDropdown = false;\n  }\n\n  avatarStyle(user) {\n    return {\n      '--avatar-bg': user.color(),\n      'font-size': '20px',\n      '--size': '30px',\n      margin: '0 10px',\n    };\n  }\n\n  validateForm() {\n    const { rvn_title, rvn_receiver_id, rvn_rent_amount, rvn_fee, rvn_fee_payer } = this.data;\n    const errors = [\n      [!rvn_title, 'Tên giao dịch không được để trống.'],\n      [!rvn_receiver_id, 'Người nhận chưa được chọn.'],\n      [rvn_rent_amount <= 0, 'Tiền thuê phải lớn hơn 0.'],\n      [!rvn_fee, 'Phí dịch vụ không hợp lệ.'],\n      [!rvn_fee_payer, 'Người trả phí chưa được chọn.'],\n      [!this.isChecked, 'Bạn phải đồng ý với điều khoản và điều kiện.'],\n    ];\n\n    for (let [condition, message] of errors) {\n      if (condition) {\n        this.showAlert('error', message, 5000)\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  formatCurrency(value) {\n    return (+value).toLocaleString('vi-VN', {\n      style: 'currency',\n      currency: 'VND',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    });\n  }\n\n  calculateTotal() {\n    const rentAmount = +this.data.rvn_rent_amount || 0;\n    const serviceFee = rentAmount * 0.1;\n    this.rvn_service_fee = this.formatCurrency(serviceFee);\n    this.rvn_total_amount = this.formatCurrency(this.data.rvn_fee_payer !== this.usernameCreate ? rentAmount + serviceFee : rentAmount);\n  }\n\n  search(query) {\n    if (query.trim()) {\n      app.store.find('users', { filter: { q: query } }).then((users) => {\n        this.resultsUser = users.filter((user) => user.username() !== this.usernameCreate);\n        this.showDropdown = true;\n        m.redraw();\n      });\n    } else {\n      this.resultsUser = [];\n      this.showDropdown = false;\n      m.redraw();\n    }\n  }\n\n  handleClickOutside(e) {\n    if (!e.target.closest('.FormControl') && !e.target.closest('.search-results')) {\n      this.showDropdown = false;\n      m.redraw();\n    }\n  }\n\n  showAlert(type = 'success', message = \"\", timeClear = 5000) {\n    app.alerts.show(Alert, { type: type }, message);\n        setTimeout(() => {\n          app.alerts.clear()\n        }, timeClear)\n  }\n\n  onsubmit(event) {\n    event.preventDefault();\n\n    app.alerts.show(Alert, { type: 'success' }, 'Tạo giao dịch thành công!');\n\n    // app.store\n    //   .createRecord('scammers')\n    //   .save({\n    //     scammerName: this.scammerName,\n    //     scammerPhone: this.scammerPhone,\n    //     scammerEmail: this.scammerEmail,\n    //     scammerBankCode: this.scammerBankCode,\n    //     scammerBankName: this.scammerBankName,\n    //     scammerAccName: this.scammerAccName,\n    //     scammerFacebook: this.scammerFacebook,\n    //     description: this.description,\n    //     createBy: app.session.user.data.id,\n    //   })\n    //   .then(() => {\n    //     app.modal.close();\n    //   })\n    //   .catch((error) => {\n    //     console.log(error);\n    //     m.redraw();\n\n    //     throw error;\n    //   });\n  }\n}\n","import app from 'flarum/forum/app';\nimport LinkButton from 'flarum/components/LinkButton';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/components/IndexPage';\nimport TransactionPage from './components/TransactionPage';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\n\nimport UserPage from \"flarum/components/UserPage\";\nimport TransactionHistoryPage from './components/TransactionHistoryPage';\n\napp.initializers.add('retechvn/mediated-transaction', () => {\n  app.routes.transactionPage = {\n    path: '/giao-dich-trung-gian',\n    component: TransactionPage,\n  };\n\n  app.routes[\"user.transactionHistory\"] = {\n    path: \"/u/:username/transactionHistory\",\n    component: TransactionHistoryPage,\n  };\n\n  // Thêm nút Giao dịch trung gian ở navItems\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (app.session && app.session.user && app.session.user.isAdmin()) {\n    items.add(\n      'transactionPage',\n      <LinkButton href={app.route('transactionPage')} icon=\"fas fa-magic\">\n        {'Giao dịch trung gian'}\n      </LinkButton>,\n      100\n    );\n  }\n  });\n\n  // Hiển thị tiển ở trên header\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (app.session && app.session.user && app.session.user.isAdmin()) {\n      items.add('techcoin', m('span.rvn__text-piece', [m('i.fas.fa-coins'), ` ${app.session.user.attribute('rvn_point')} RTC`]), 15);\n    }\n  });\n  \n  // Hiển thị lịch sử giao dịch trong trang cá nhân\n  extend(UserPage.prototype, \"navItems\", function (items,user) {\n    if(app.session.user){\n      const currentUserID = app.session.user.id();\n      const targetUserID = this.user.id();\n\n      if(currentUserID==targetUserID){\n        items.add(\n          \"transactionMoney\",\n          LinkButton.component({\n              href: app.route(\"user.transactionHistory\", {\n                username: this.user.username(),\n              }),\n              icon: \"fas fa-money-bill\",\n            },\n            [\n              \"Lịch sử giao dịch\"\n            ]\n          ),\n          10\n        );\n      }\n    }\n});\n});\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/HeaderSecondary'];","module.exports = flarum.core.compat['helpers/listItems'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["app","initializers","add","console","log","Component","LoadingIndicator","Button","TransactionHistoryList","_Component","apply","arguments","_inheritsLoose","_proto","prototype","oninit","vnode","call","loading","view","_this","component","size","m","style","transferHistory","map","key","id","TransferHistoryListItem","length","translator","trans","hasMoreResults","className","disabled","onclick","loadMore","loadResults","parseResults","results","moreResults","payload","links","next","push","redraw","offset","store","find","filter","user","page","then","bind","default","UserPage","TransferHistoryList","TransactionHistoryPage","_UserPage","loadUser","route","param","content","params","Page","IndexPage","listItems","Alert","TransactionPage","_Page","usernameCreate","session","username","initializeData","resultsUser","showDropdown","handleClickOutside","data","rvn_creator_id","rvn_receiver_id","rvn_rent_amount","rvn_fee","rvn_fee_payer","rvn_note","rvn_title","rvn_receiver_name","oncreate","setTitle","setTitleCount","document","addEventListener","onremove","removeEventListener","hero","renderSidebar","renderForm","sidebarItems","toArray","renderInput","renderReceiverInput","renderNumberInput","handleRentChange","renderRadioGroup","rvn_service_fee","rvn_total_amount","renderTextarea","e","target","value","renderCheckbox","renderSubmitButton","label","_this2","onfocus","onkeyup","handleSearch","renderDropdown","renderDropdownItem","_this3","selectReceiver","avatarUrl","src","alt","displayName","avatarStyle","charAt","toUpperCase","onChange","formatCurrency","onchange","renderRadioOption","checked","_this4","name","handleFeePayerChange","_this5","isChecked","_this6","type","validateForm","onsubmit","calculateTotal","_this7","setTimeout","search","color","margin","_this$data","errors","_i","_errors","_errors$_i","condition","message","showAlert","toLocaleString","currency","minimumFractionDigits","maximumFractionDigits","rentAmount","serviceFee","query","_this8","trim","q","users","closest","timeClear","alerts","show","clear","event","preventDefault","LinkButton","extend","HeaderSecondary","routes","transactionPage","path","items","isAdmin","href","icon","attribute","currentUserID","targetUserID","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}