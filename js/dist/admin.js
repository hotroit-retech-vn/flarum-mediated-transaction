(()=>{var t={n:n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};(()=>{"use strict";const n=flarum.core.compat["common/app"];t.n(n)().initializers.add("retechvn/mediated-transaction",(function(){console.log("[retechvn/mediated-transaction] Hello, forum and admin!")}));const e=flarum.core.compat["admin/app"];var r=t.n(e);const a=flarum.core.compat["common/extend"],i=flarum.core.compat["admin/components/AdminNav"];var o=t.n(i);const s=flarum.core.compat["common/components/LinkButton"];var c=t.n(s);function u(t,n){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},u(t,n)}function h(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n)}const d=flarum.core.compat["admin/components/AdminPage"];var l=t.n(d);flarum.core.compat["common/helpers/listItems"];const _=flarum.core.compat["common/components/Dropdown"];var v=t.n(_),p=function(t){function n(){for(var n,e,r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).throttledSearch=(e=function(){return n.loadPage(0)},function(){for(var t=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];r&&clearTimeout(r),r=setTimeout((function(){e.apply(t,a)}),250)}),n}h(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.transactionData=[],this.isLoadingPage=!0,this.moreResults=!1,this.query="",this.loadPage(0)},e.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.transactionData,t.payload.data),this.isLoadingPage=!1,m.redraw(),t},e.loadPage=function(t){return void 0===t&&(t=0),this.transactionData=[],r().store.find("admin/transactions",{page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},e.headerInfo=function(){return{className:"SharedUploadPage--header",icon:"fas fa-magic",title:"Quản lý giao dịch",description:"What is here??"}},e.getStatusText=function(t){switch(t){case 3:return"Hoàn thành";case 4:return"Đã hủy";case 5:case 6:return"Đang khiếu nại";default:return"Đang xử lý"}},e.getStatusColor=function(t){switch(t){case 3:return"green";case 4:return"red";case 1:case 2:case 5:case 6:return"orange";default:return"gray"}},e.formatCurrency=function(t){return t||(t=0),(+t).toLocaleString("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0})},e.content=function(){var t=this;return[m("div.UserListPage-header",[m("div.Search-input",[m("input.FormControl.SearchBar",{type:"search",placeholder:"Nhập thông tin tìm kiếm",oninput:function(n){t.isLoadingPage=!0,t.query=n.target.value,t.throttledSearch()}})])]),m("div",[m(".sideNavContainer",[m("div",[m("div.iconcontainer",[m("div.rvn__title-table","Danh sách yêu cầu giao dịch")]),m("table.rvn__table",[m("thead.rvn__thead",[m("tr.rvn__tr",[m("th.rvn__th","STT"),m("th.rvn__th","Người tạo"),m("th.rvn__th","Người nhận"),m("th.rvn__th","Tiền thuê"),m("th.rvn__th","Phí (%)"),m("th.rvn__th","Tổng tiền"),m("th.rvn__th","Ngày tạo"),m("th.rvn__th","Trạng thái"),m("th.rvn__th",{style:"width:100px;"},"Chi tiết")])]),m("tbody.rvn__tbody",this.transactionData.map((function(n,e){return m("tr.rvn__tr",{key:n.id},[m("td.rvn__td",e+1),m("td.rvn__td",n.attributes.creator.username),m("td.rvn__td",n.attributes.receiver.username),m("td.rvn__td",t.formatCurrency(n.attributes.rvn_amount)),m("td.rvn__td",100*n.attributes.rvn_fee+"%"),m("td.rvn__td",t.formatCurrency(n.attributes.rvn_amount+n.attributes.rvn_amount*n.attributes.rvn_fee)),m("td.rvn__td",n.attributes.created_at),m("td.rvn__td",{className:t.getStatusColor(n.attributes.rvn_status)},t.getStatusText(n.attributes.rvn_status)),m("td.rvn__td",m(v(),{className:"User-controls",buttonClassName:"Button Button--icon Button--flat",menuClassName:"Dropdown-menu--right",icon:"fas fa-ellipsis-h"},m("button.Button.UserList-editModalBtn",{title:"nút"},[m("i.fas.fa-pencil-alt"),"Xem chi tiết"])))])})))])])])])]},n}(l()),f=function(t){function n(){for(var n,e,r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).throttledSearch=(e=function(){return n.loadPage(0)},function(){for(var t=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];r&&clearTimeout(r),r=setTimeout((function(){e.apply(t,a)}),250)}),n}h(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n),this.transactionData=[],this.isLoadingPage=!0,this.moreResults=!1,this.query="",this.loadPage(0)},e.parseResults=function(t){return this.moreResults=!!t.payload.links&&!!t.payload.links.next,[].push.apply(this.transactionData,t.payload.data),console.log(this.transactionData),this.isLoadingPage=!1,m.redraw(),t},e.loadPage=function(t){return void 0===t&&(t=0),this.transactionData=[],r().store.find("pay-requests",{page:{offset:t}}).catch((function(){})).then(this.parseResults.bind(this))},e.headerInfo=function(){return{className:"SharedUploadPage--header",icon:"fas fa-magic",title:"Quản lý giao dịch",description:"What is here??"}},e.getStatusText=function(t){switch(t){case 3:return"Hoàn thành";case 4:return"Đã hủy";case 5:case 6:return"Đang khiếu nại";default:return"Đang xử lý"}},e.getStatusColor=function(t){switch(t){case 3:return"green";case 4:return"red";case 1:case 2:case 5:case 6:return"orange";default:return"gray"}},e.formatCurrency=function(t){return t||(t=0),(+t).toLocaleString("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0})},e.content=function(){var t=this;return[m("div.UserListPage-header",[m("div.Search-input",[m("input.FormControl.SearchBar",{type:"search",placeholder:"Nhập thông tin tìm kiếm",oninput:function(n){t.isLoadingPage=!0,t.query=n.target.value,t.throttledSearch()}})])]),m("div",[m(".sideNavContainer",[m("div",[m("div.iconcontainer",[m("div.rvn__title-table","Danh sách yêu cầu giao dịch")]),m("table.rvn__table",[m("thead.rvn__thead",[m("tr.rvn__tr",[m("th.rvn__th","STT"),m("th.rvn__th","Người tạo"),m("th.rvn__th","Người nhận"),m("th.rvn__th","Tiền thuê"),m("th.rvn__th","Phí (%)"),m("th.rvn__th","Tổng tiền"),m("th.rvn__th","Ngày tạo"),m("th.rvn__th","Trạng thái"),m("th.rvn__th",{style:"width:100px;"},"Chi tiết")])]),m("tbody.rvn__tbody",this.transactionData.map((function(n,e){return m("tr.rvn__tr",{key:n.id},[m("td.rvn__td",e+1),m("td.rvn__td",n.attributes.creator.username),m("td.rvn__td",n.attributes.receiver.username),m("td.rvn__td",t.formatCurrency(n.attributes.rvn_amount)),m("td.rvn__td",100*n.attributes.rvn_fee+"%"),m("td.rvn__td",t.formatCurrency(n.attributes.rvn_amount+n.attributes.rvn_amount*n.attributes.rvn_fee)),m("td.rvn__td",n.attributes.created_at),m("td.rvn__td",{className:t.getStatusColor(n.attributes.rvn_status)},t.getStatusText(n.attributes.rvn_status)),m("td.rvn__td",m(v(),{className:"User-controls",buttonClassName:"Button Button--icon Button--flat",menuClassName:"Dropdown-menu--right",icon:"fas fa-ellipsis-h"},m("button.Button.UserList-editModalBtn",{title:"nút"},[m("i.fas.fa-pencil-alt"),"Xem chi tiết"])))])})))])])])])]},n}(l());r().initializers.add("retechvn/mediated-transaction",(function(){r().routes.transactionListPage={path:"/giao-dich-trung-gian",component:p},r().routes.payRequestListPage={path:"/yeu-cau-rut-tien",component:f},(0,a.extend)(o().prototype,"items",(function(t){t.add("list-scammers",m(c(),{href:r().route("transactionListPage"),icon:"fas fa-magic",title:"Giao dịch trung gian"},"Giao dịch trung gian"),49),t.add("pay-requests",m(c(),{href:r().route("payRequestListPage"),icon:"fas fa-magic",title:"Yêu cầu rút tiền"},"Yêu cầu rút tiền"),49)}))}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map